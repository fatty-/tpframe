<!doctype html>
<head>
		<meta charset="utf-8">
		<!-- Set render engine for 360 browser -->
		<meta name="renderer" content="webkit">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<!-- HTML5 shim for IE8 support of HTML5 elements -->
		<!--[if lt IE 9]>
			<script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js">
			</script>
		<![endif]-->
		<link href="__THEMES__/css/theme.min.css" rel="stylesheet">
		<link href="__THEMES__/css/simplebootadmin.css" rel="stylesheet">
		<link href="__THEMES__/css/default.css" rel="stylesheet" />
		<link href="__THEMES__/css/font-awesome.min.css" rel="stylesheet" type="text/css">
		<style>
			.length_3{width: 180px;} form .input-order{margin-bottom: 0px;padding:3px;width:40px;}
			.table-actions{margin-top: 5px; margin-bottom: 5px;padding:0px;} .table-list{margin-bottom:
			0px;}
		</style>
		<!--[if IE 7]>
			<link rel="stylesheet" href="__THEMES__/css/font-awesome-ie7.min.css">
		<![endif]-->
		<script type="text/javascript">
			//全局变量
			var GV = {
				WEB_ROOT:"",
				DIMAUB: "/",
				JS_ROOT: "/theme/backend/assets/js/",
				TOKEN: ""
			};
		</script>
		<!-- Le javascript==================================================-
		-> <!-- Placed at the end of the document so the pages load faster -->
		<script src="__THEMES__/js/jquery.js"></script>
		<script src="__THEMES__/js/wind.js"></script>
		<script src="__THEMES__/js/bootstrap.min.js"></script>
		<script src="__THEMES__/kindeditor/kindeditor-min.js"></script>
		<link href="__THEMES__/kindeditor/themes/default/default.css" rel="stylesheet"/>
	</head>
<script>
	KindEditor.ready(function(K) {
		var uploadbutton = K.uploadbutton({
			button : K('#uploadButton')[0],
			fieldName : 'imgFile',
			url : '{:url("Slide/upload")}',
			afterUpload : function(data) {
				if (data.error === 0) {
					var url = K.formatUrl(data.url, 'absolute');
							K('#url').val(url);
							$('#show_thumb').attr('src',url).show();
						} else {
							alert(data.message);
						}
					},
					afterError : function(str) {
						alert('自定义错误信息: ' + str);
					}
			});
			uploadbutton.fileBox.change(function(e) {
			uploadbutton.submit();
		});
	});
</script>
<body>
	<div class="wrap">
		<ul class="nav nav-tabs">
			<li><a href="{:url('slide/index')}">幻灯片管理</a></li>
			<li><a href="{:url('slide/add')}">添加幻灯片</a></li>
			<li class="active"><a href="{:url('slide/edit')}">编辑幻灯片</a></li>
		</ul>
		<form method="post" class="form-horizontal js-ajax-form" action="{:url('Slide/edit')}">
		<input type="hidden" name="slide_id" value="{$edit_slide[0]->slide_id}"/>
			<fieldset>
				<div class="control-group">
					<label class="control-label">分类</label>
					<div class="controls">
						<select name="slide_cid">
							{foreach name="categorys" id="vo"}
							<option value="{$vo.cid}" {eq name="vo.cid" value="$edit_slide[0]->slide_cid"}selected="selected"{/eq}>{$vo.cat_name}</option>
							{/foreach}
						</select>
						<span class="form-required">*</span>
					</div>
				</div>
				<div class="control-group">
					<label class="control-label">标题</label>
					<div class="controls">
						<input type="text" name="slide_name" value="{$edit_slide[0]->slide_name}">
						<span class="form-required">*</span>
					</div>
				</div>
				<div class="control-group">
					<label class="control-label">链接</label>
					<div class="controls">
						<input type="text" name="slide_url" value="{$edit_slide[0]->slide_url}">
						<span class="form-required">*</span>
					</div>
				</div>
				<div class="control-group">
					<label class="control-label">缩略图</label>
					<div class="controls">
						<input class="ke-input-text" type="text" id="url" value="{$edit_slide[0]->slide_pic}" name='slide_pic' readonly="readonly" /> 
						<input type="button" id="uploadButton" value="上传缩略图" />
						<img src="{$edit_slide[0]->slide_pic}" style="width:50px;height:50px;" id="show_thumb"/>
						<span class="form-required">*</span>
					</div>
				</div>
				<div class="control-group">
					<label class="control-label">幻灯片内容</label>
					<div class="controls">
						<textarea name="slide_content" rows="5" cols="57">{$edit_slide[0]->slide_content}</textarea>
						<span class="form-required">*</span>
					</div>
				</div>
				<div class="control-group">
					<label class="control-label">描述</label>
					<div class="controls">
						<textarea name="slide_des" rows="5" cols="57">{$edit_slide[0]->slide_des}</textarea>
					</div>
				</div>
			</fieldset>
			<div class="form-actions">
				<button class="btn btn-primary" type="submit">修改</button>
				<a class="btn" href="javascript:history.back(-1);">取消</a>
			</div>
		</form>
	</div>
	<script src="__THEMES__/js/common.js"></script>
</body>
</html>